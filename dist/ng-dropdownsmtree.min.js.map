{"version":3,"sources":["ng-dropdownsmtree.js"],"names":["angular","module","directive","$filter","require","replace","childArrays","parentArray","childArraysItemDisplayField","parentArrayItemDisplayField","childArraysItemSearchField","disabled","titlePlaceholder","template","html","iAttrs","controlClass","searchPlaceholder","parentArrayItemIdField","childArraysItemParentId","scope","showSecondLevel","ctrl","$render","clickedItem","toggleClass","Description","selectedsubjectdesc","elm","$","iElement","find","removeClass","SearchSubjectFLTR","length","_arr","i","addClass","event","currentTarget","srcElement","closest","slideToggle","setselecteditem","sb","$setViewValue"],"mappings":"AAAA,aAEAA,QAAQC,OAAO,mBAAoB,IAE/BC,UAAO,mBAAA,CAAA,UAAA,SAAAC,GACH,MAAA,CAEAC,SAAS,KACTC,QAAQ,UACRA,SAAA,EAEIC,MAAAA,CACAC,YAAa,IACbC,YAAAA,IACAC,4BAA6B,IAC7BC,4BAA4B,IAC5BC,2BANG,IAOHC,SAAAA,IACAA,iBAAA,KAOAC,SAAMC,SAAAA,EAAAA,GA6CM,MAxBZA,4HA1CDC,EAAAC,aA0CC,mfAf2DD,EAAOE,kBAelE,2OAOqBF,EAAAG,uBAPrB,0eAckCH,EAAAI,wBAdlC,WAckCJ,EAAAG,uBAdlC,uBAckCH,EAAAL,2BAdlC,8ZAgCAU,KAAAA,SAAAA,EAAMC,EAAAA,EAAkBC,GAEpBA,EAAAC,QAAMC,WACNA,EAAAA,WACAA,EAAAA,oBAAAF,EAA+BG,WAAYC,YAzBzCN,EAAMO,oBAAsBP,EAAMR,kBA+BpCU,EAAAA,oBAAA,WAzBA,IAAMM,EAAMC,EAAEC,GAAUC,KAAK,MAI7B,GA/DZH,EAAAG,KAAA,wBAAAC,YAAA,YA+DiD,EAAjCZ,EAAMa,kBAAkBC,OAExB,IADA,IAAMC,EAAOhC,EAAQ,SAAUiB,EAAMV,2BAAxBP,CAAoDiB,EAAMd,YAAac,EAAMa,mBACjFG,EAAI,EAAGA,EAAID,EAAKD,OAAQE,IACmB,OAA5CD,EAAKC,GAAGrB,EAAOI,yBACfS,EAAIG,KAAK,uBAAuBM,SAAS,YAEzCT,EAAIG,KAAJ,aAAsBI,EAAKC,GAAGrB,EAAOI,yBAArC,WAAwEkB,SAAS,aAKjGjB,EAAMC,gBAAkB,SAACiB,GAErB,IAAMd,EAAcK,EAAES,EAAMC,eAAiBD,EAAME,YAAYC,QAAQ,MACvEjB,EAAYO,KAAK,YAAYW,YAAY,KACzClB,EAAYO,KAAK,cAAcN,YAAY,mCAI/CL,EAAMuB,gBAAkB,SAACC,GACrBtB,EAAKuB,cAAcD,GACnBtB,EAAKC","file":"ng-dropdownsmtree.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('ngDropdownsmtree', [])\r\n.directive('ngDropdownsmtree', ['$filter', ($filter)=> {\r\n    return {\r\n        // can be used as attribute(A) or element(E)\r\n        restrict: 'AE',\r\n        require: 'ngModel',\r\n        replace:true,\r\n        // declare the directive scope as private \r\n        scope: {\r\n            childArrays: '=',            \r\n            parentArray: '=',\r\n            childArraysItemDisplayField: '@',\r\n            parentArrayItemDisplayField: '@',\r\n            childArraysItemSearchField: '@',\r\n            disabled: '=',\r\n            titlePlaceholder: '@'\r\n            //selectedsubjectdesc: '@'\r\n        },\r\n\r\n\r\n        // the markup this directive generates\r\n        template: (iElement, iAttrs) => {\r\n\r\n            const html = `<div class=\"btn-group\" style=\"width:100%\">\r\n                            <button type=\"button\" class=\"btn dropdown-toggle ${iAttrs.controlClass}\" data-ng-class=\"{\\'disabled\\':disabled == true}\"   data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" >\r\n                                <i class=\"glyphicon glyphicon-triangle-bottom pull-right\" style=\"margin-top:3px\"></i>\r\n                                 {{selectedsubjectdesc}}\r\n                            </button>            \r\n                            <ul class=\"dropdown-menu custom-dropdown-menu\" >\r\n                                <li ><input type=\"text\" placeholder=\"${iAttrs.searchPlaceholder}\" class=\"form-control\"  ng-change=\"highlightContainers()\" data-ng-model=\"SearchSubjectFLTR\" data-ng-init=\"SearchSubjectFLTR =\\'\\'\" /></li>\r\n                                <li data-ng-repeat=\"item in parentArray\" data-src=\"{{item[\\'${iAttrs.parentArrayItemIdField}\\']}}\">\r\n                                    <span  onclick=\"event.stopPropagation();\" data-ng-click=\"showSecondLevel($event)\" ><span class=\"glyphicon glyphicon-plus\"></span> {{item[parentArrayItemDisplayField]}}</span>\r\n                                    <div class=\"content\" style=\"margin-left: 14px; overflow: hidden\">\r\n                                    <ul style=\"padding-left: 15px\" >\r\n                                            <li data-ng-repeat=\"sb in childArrays | filter: {${iAttrs.childArraysItemParentId}: item[\\'${iAttrs.parentArrayItemIdField}\\']}: true | filter:{${iAttrs.childArraysItemSearchField}:SearchSubjectFLTR} \">\r\n                                                <a href=\"\" data-ng-click=\"setselecteditem(sb)\"> {{sb[childArraysItemDisplayField] }}</a>\r\n                                            </li>\r\n                                        </ul>\r\n                                    </div>\r\n                                </li>\r\n\r\n                            </ul>\r\n                        </div>`;\r\n\r\n            return html;\r\n        },\r\n\r\n        // this function is called on each ng-Twolevelddl instance initialisation\r\n        // we just declare what we need in the above template\r\n        link: (scope, iElement, iAttrs, ctrl) => {\r\n\r\n            ctrl.$render = () => {\r\n                if(ctrl.$viewValue)\r\n                  scope.selectedsubjectdesc = ctrl.$viewValue.Description;\r\n                else\r\n                  scope.selectedsubjectdesc = scope.titlePlaceholder;\r\n            };\r\n            \r\n            scope.highlightContainers = () => {\r\n\r\n                //remove previous heighlights\r\n                const elm = $(iElement).find('ul');\r\n                elm.find(\" >li > span.has-data\").removeClass('has-data');\r\n\r\n                //height the new elements that contains the new search test\r\n                if (scope.SearchSubjectFLTR.length > 0) {\r\n                    const _arr = $filter('filter', scope.childArraysItemSearchField)(scope.childArrays, scope.SearchSubjectFLTR);\r\n                    for (let i = 0; i < _arr.length; i++) {\r\n                        if (_arr[i][iAttrs.childArraysItemParentId] === null)\r\n                            elm.find(\"[data-src=''] >span\").addClass('has-data');                        \r\n                        else\r\n                            elm.find(`[data-src=${_arr[i][iAttrs.childArraysItemParentId]}] >span`).addClass('has-data');\r\n                    }\r\n                }\r\n            };\r\n\r\n            scope.showSecondLevel = (event) => {\r\n\r\n                const clickedItem = $(event.currentTarget || event.srcElement).closest('li');\r\n                clickedItem.find('.content').slideToggle(500);\r\n                clickedItem.find('.glyphicon').toggleClass('glyphicon-plus glyphicon-minus');\r\n\r\n            };\r\n\r\n            scope.setselecteditem = (sb) => {\r\n                ctrl.$setViewValue(sb);\r\n                ctrl.$render();\r\n            };\r\n\r\n        }\r\n\r\n    };\r\n}]);\r\n\r\n\r\n"]}